#!/usr/bin/env node
const program = require('commander')
const axios = require('axios')

program
  .option('-n, --issueNo', '只能拉取指定的issue')
  .parse(process.argv)

// 获取所有的issue
if (!program.args[0]) {
  axios({
    methods: 'get',
    headers: { 'content-type': 'application/vnd.github.VERSION.raw+json' },
    url: 'https://api.github.com/repos/zimplexing/zzZ/issues'
  }).then(doc => {
    console.log(doc);
  }, err => {
    console.log(err);
  })
  return
}

// 获取指定的issue
const issueNo = program.args.map(no => {
  if (!Number.isNaN(Number(no))) {
    return Number(no)
  }
})

if (!issueNo.length) {
  console.error('请输入正确的issue的标号')
}

console.log(issueNo);